{% extends 'base.html' %}
{% load static %}

{% block meta %}
<title>Craftics Cart</title>
{% endblock meta %}

{% block content %}
{% include 'navbar.html' %}

<div class="overflow-x-hidden px-4 md:px-8 pb-8 pt-24 min-h-screen bg-yellow-100 flex flex-col justify-between">
  
  <!-- Carousel Section -->
  <div class="flex justify-center mb-8 relative">
    <div class="w-full max-w-4xl overflow-hidden relative border-4 border-pink-600 rounded-lg">
      <!-- Container Carousel -->
      <div id="carousel" class="flex transition-transform duration-500 ease-in-out w-[300%]">
        <img src="{% static 'image/car-1.png' %}" alt="Carousel 1" class="w-[100%] h-[450px] object-cover rounded-lg">
        <img src="{% static 'image/car-2.png' %}" alt="Carousel 2" class="w-[100%] h-[450px] object-cover rounded-lg">
        <img src="{% static 'image/car-3.png' %}" alt="Carousel 3" class="w-[100%] h-[450px] object-cover rounded-lg">
      </div>

      <!-- Tombol Geser Kiri -->
      <button id="prevBtn" class="absolute top-1/2 left-4 transform -translate-y-1/2 bg-white bg-opacity-50 text-gray-700 rounded-full p-3 z-20">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="currentColor">
          <path fill-rule="evenodd" d="M15.293 7.293a1 1 0 011.414 1.414L10.414 15l6.293 6.293a1 1 0 01-1.414 1.414l-7-7a1 1 0 010-1.414l7-7z" clip-rule="evenodd" />
        </svg>
      </button>

      <!-- Tombol Geser Kanan -->
      <button id="nextBtn" class="absolute top-1/2 right-4 transform -translate-y-1/2 bg-white bg-opacity-50 text-gray-700 rounded-full p-3 z-20">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="currentColor">
          <path fill-rule="evenodd" d="M8.707 16.707a1 1 0 01-1.414-1.414L13.586 9l-6.293-6.293a1 1 0 111.414-1.414l7 7a1 1 0 010 1.414l-7 7z" clip-rule="evenodd" />
        </svg>
      </button>
    </div>
  </div>

  <!-- Craft Section -->
  <div class="flex flex-col items-center justify-center mb-8">
    {% if not craft_entries %}
      <div class="flex flex-col items-center justify-center">
        <img src="{% static 'image/bow.png' %}" alt="Sad face" class="w-32 h-32 mb-4 animate-pulse"/>
        <p class="text-center text-pink-500 text-xl font-bold mt-4">
          Oops! Belum ada data craft di Craftics Cart.
        </p>
        <p class="text-center text-gray-600 text-sm mt-2">
          Ayo tambahkan craft baru sekarang juga!
        </p>
      </div>      
    {% endif %}
    
    <!-- Nama dan Kelas di Bawah "+" Button -->
    <div class="text-center mt-6">
      <a href="{% url 'main:create_craft_entry' %}" class="relative group inline-block">
        <div class="flex items-center justify-center w-16 h-16 bg-pink-500 text-white rounded-full shadow-lg transition-all duration-300 transform group-hover:w-32 group-hover:bg-yellow-500 group-hover:scale-110">
          <span class="text-2xl font-bold group-hover:hidden">+</span>
          <span class="hidden group-hover:inline font-bold">Add Craft</span>
        </div>
      </a>
    </div>
  </div>

  <!-- Card Section -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 px-4 sm:px-6 lg:px-8">
    {% if craft_entries %}
      {% for craft_entry in craft_entries %}
        {% include 'card_craft.html' with craft_entry=craft_entry %}
      {% endfor %}
    {% endif %}
  </div>

  <!-- Timestamp di Paling Bawah -->
  <div class="text-center mt-8">
    <p class="text-gray-400 text-sm italic">Last Login: {{ last_login }}</p> <!-- Timestamp dengan sheer color -->
  </div>

  <!-- Nama dan Kelas -->
  <div class="text-center mt-6">
    <p class="text-pink-500 text-lg font-semibold"> &COPY; {{ nama }} || {{ kelas }}</p>
  </div>
</div>

<!-- Script Carousel -->
<script>
  const carousel = document.getElementById('carousel');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  let currentIndex = 0;

  // Total slides (jumlah gambar dalam carousel)
  const totalSlides = carousel.children.length;

  // Lebar per slide
  const slideWidth = carousel.children[0].clientWidth;

  // Geser ke kiri
  prevBtn.addEventListener('click', () => {
    if (currentIndex > 0) {
      currentIndex--;
      carousel.style.transform = `translateX(-${currentIndex * slideWidth}px)`;
    }
  });

  // Geser ke kanan
  nextBtn.addEventListener('click', () => {
    if (currentIndex < totalSlides - 1) {
      currentIndex++;
      carousel.style.transform = `translateX(-${currentIndex * slideWidth}px)`;
    }
  });
</script>
{% endblock content %}